<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SAKE: de.nec.nle.siafu.model.CoordinateTools Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SAKE
   </div>
   <div id="projectbrief">A Simulation Framework to Analyze Knowledge Exchange Strategies in Distributed Self-adaptive Systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_coordinate_tools.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_coordinate_tools-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">de.nec.nle.siafu.model.CoordinateTools Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aee1cafdd9497b539148aa2822b7930cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_coordinate_tools.html#aee1cafdd9497b539148aa2822b7930cd">CoordinateTools</a> (final int height, final int width, final double[] topRight, final double[] bottomRight, final double[] bottomLeft)</td></tr>
<tr class="separator:aee1cafdd9497b539148aa2822b7930cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac96218e087bc32b14456775205526282"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_coordinate_tools.html#ac96218e087bc32b14456775205526282">localToPrettyCoordinates</a> (final <a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_position.html">Position</a> pos)</td></tr>
<tr class="separator:ac96218e087bc32b14456775205526282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3812b3d3c8e639c8e04486fd3607ad1"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_coordinate_tools.html#ae3812b3d3c8e639c8e04486fd3607ad1">localToPrettyCoordinates</a> (final int i, final int j)</td></tr>
<tr class="separator:ae3812b3d3c8e639c8e04486fd3607ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa13aeba6a708b1d7de2160c4fec11351"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_coordinate_tools.html#aa13aeba6a708b1d7de2160c4fec11351">coordinatesToPrettyCoordinates</a> (final double[] coord)</td></tr>
<tr class="separator:aa13aeba6a708b1d7de2160c4fec11351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a544e458e7a9cae459b1b83a94b0c0699"><td class="memItemLeft" align="right" valign="top">double []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_coordinate_tools.html#a544e458e7a9cae459b1b83a94b0c0699">localToCoordinates</a> (final int i, final int j)</td></tr>
<tr class="separator:a544e458e7a9cae459b1b83a94b0c0699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8bea4a02a51a7cf0e96f458b98936b9"><td class="memItemLeft" align="right" valign="top">double []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_coordinate_tools.html#ae8bea4a02a51a7cf0e96f458b98936b9">localToCoordinates</a> (final <a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_position.html">Position</a> pos)</td></tr>
<tr class="separator:ae8bea4a02a51a7cf0e96f458b98936b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31fdff2fdec9a72fb59f2d979b27fe28"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_position.html">Position</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_coordinate_tools.html#a31fdff2fdec9a72fb59f2d979b27fe28">coordinatesToLocal</a> (final double lat, final double lon)</td></tr>
<tr class="separator:a31fdff2fdec9a72fb59f2d979b27fe28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Siafu's concept of space is actually discrete. When you provide the map images in the simulation data, these are broken down into an array of pixels, and the rows and columns of those become the real positions used internally during the simulation.</p>
<p>This is naturally not satisfactory for the purpose of location simulation, and so, the simulation data config file allows you to provide the coordinates that calibrate the map into a real world place. The Coordinate class is used to map the internal position used by Siafu into latitude/longitude pairs.</p>
<p>The map is a rectangular portion of the world, not necessarily north oriented. To calibrate it, you provide the top right, bottom right and bottom left coordinates.</p>
<p>Finding the right lat/long in our rectuangular map is a matter of coordinate rotation from (x,y) to (lat,lon) plus offsetting where:</p>
<p>x = mapWitdhDegrees * j/w <br />
 y = mapHeightDegrees * (h-i)/h <br />
</p>
<p>where: <br />
 mapWitdth = sqrt( (brLat - blLat)^2 + (brLon - blLon)^2 ) <br />
 mapHeight = sqrt( (trLat - brLat)^2 + (trLon - brLon)^2 ) <br />
</p>
<p>Then: <br />
 lat = x*sin(A) + y*cos(A) + blLat <br />
 long = x*cos(A) - y*sin(A) + blLon <br />
</p>
<p>where A is the tilt angle of the map:</p>
<p>A = arcos((brLong - blLong) / mapWidthDegrees)<br />
</p>
<p>To reverse the proces, and go from coordinates to a map row and column, you need to rotate the other way around, so:</p>
<p>y = lon*sin(-A) + lat*cos(-A) - blLat = lon * (-sin(A)) +lat*cos(A) - (blLat*cos(a)) + (blLon*sin(a)) <br />
 x = lon*cos(-A) - lat*sin(-A) - blLon = lon * cos(A)+ lat*sin(A) - (blLat*sin(a)) - (blLon * cos(a) <br />
</p>
<p>And then:</p>
<p>j = w * (x / mapWitdhDegrees) <br />
 i = h - ( h * (y / mapHeightDegrees))<br />
</p>
<dl class="section author"><dt>Author</dt><dd>Miquel Martin </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aee1cafdd9497b539148aa2822b7930cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee1cafdd9497b539148aa2822b7930cd">&#9670;&nbsp;</a></span>CoordinateTools()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">de.nec.nle.siafu.model.CoordinateTools.CoordinateTools </td>
          <td>(</td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final double []&#160;</td>
          <td class="paramname"><em>topRight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final double []&#160;</td>
          <td class="paramname"><em>bottomRight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final double []&#160;</td>
          <td class="paramname"><em>bottomLeft</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the mapping between the Siafu simulation grid and the actual coordinates.</p>
<p>The simulation map corresponds to a rectangular area in the real world. There's no limitations in the aspect ratio of the retangle, and it does not need to be north oriented.</p>
<p>The inizialization calculates how the amount of latitude and longitude degrees associated to each grid point. Using the method, the transformation between grid points and coordinates costs only two multiplications and two additions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">height</td><td>the number of rows in the Siafu map </td></tr>
    <tr><td class="paramname">width</td><td>the number of columns in the Siafu map </td></tr>
    <tr><td class="paramname">topRight</td><td>an double array conaining the latitude and longitude of the top right corner of the map. </td></tr>
    <tr><td class="paramname">bottomRight</td><td>an double array conaining the latitude and longitude of the bottom right corner of the map. </td></tr>
    <tr><td class="paramname">bottomLeft</td><td>an double array conaining the latitude and longitude of the bottom left corner of the map. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a31fdff2fdec9a72fb59f2d979b27fe28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31fdff2fdec9a72fb59f2d979b27fe28">&#9670;&nbsp;</a></span>coordinatesToLocal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_position.html">Position</a> de.nec.nle.siafu.model.CoordinateTools.coordinatesToLocal </td>
          <td>(</td>
          <td class="paramtype">final double&#160;</td>
          <td class="paramname"><em>lat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final double&#160;</td>
          <td class="paramname"><em>lon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the map row and column corresponding to the given coordinates.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lat</td><td>the latitude </td></tr>
    <tr><td class="paramname">lon</td><td>the longitude </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a <a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_position.html">Position</a> with the Siafu position matching the given coordinates </dd></dl>

</div>
</div>
<a id="aa13aeba6a708b1d7de2160c4fec11351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa13aeba6a708b1d7de2160c4fec11351">&#9670;&nbsp;</a></span>coordinatesToPrettyCoordinates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String de.nec.nle.siafu.model.CoordinateTools.coordinatesToPrettyCoordinates </td>
          <td>(</td>
          <td class="paramtype">final double []&#160;</td>
          <td class="paramname"><em>coord</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert a coordinate pair into a string of the form "N 49 34.233 E 23
22.322".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">coord</td><td>the coordinates to transofrm </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the prettified string </dd></dl>

</div>
</div>
<a id="a544e458e7a9cae459b1b83a94b0c0699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a544e458e7a9cae459b1b83a94b0c0699">&#9670;&nbsp;</a></span>localToCoordinates() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double [] de.nec.nle.siafu.model.CoordinateTools.localToCoordinates </td>
          <td>(</td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>j</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the latitude and longitude corresponding to the map internal row i and column j.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>the row </td></tr>
    <tr><td class="paramname">j</td><td>the column </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a double[2] with the latitude in position 0, and the longitudein position 1. </dd></dl>

</div>
</div>
<a id="ae8bea4a02a51a7cf0e96f458b98936b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8bea4a02a51a7cf0e96f458b98936b9">&#9670;&nbsp;</a></span>localToCoordinates() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double [] de.nec.nle.siafu.model.CoordinateTools.localToCoordinates </td>
          <td>(</td>
          <td class="paramtype">final <a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_position.html">Position</a>&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the latitude and longitude corresponding to the map internal row and column given by the <a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_position.html">Position</a> parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>the position to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a double[2] with the latitude in position 0, and the longitudein position 1. </dd></dl>

</div>
</div>
<a id="ac96218e087bc32b14456775205526282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac96218e087bc32b14456775205526282">&#9670;&nbsp;</a></span>localToPrettyCoordinates() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String de.nec.nle.siafu.model.CoordinateTools.localToPrettyCoordinates </td>
          <td>(</td>
          <td class="paramtype">final <a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_position.html">Position</a>&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert a Siafu map position (a row column pair) into a string of the form "N 49 34.233 E 23 22.322", according to the map calibration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>the position </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the prettified string </dd></dl>

</div>
</div>
<a id="ae3812b3d3c8e639c8e04486fd3607ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3812b3d3c8e639c8e04486fd3607ad1">&#9670;&nbsp;</a></span>localToPrettyCoordinates() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String de.nec.nle.siafu.model.CoordinateTools.localToPrettyCoordinates </td>
          <td>(</td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>j</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert a Siafu map position (a row column pair) into a string of the form "N 49 34.233 E 23 22.322", according to the map calibration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>the row of the position </td></tr>
    <tr><td class="paramname">j</td><td>the column of the position </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the prettified string </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Siafu-Sake-Simulator/Siafu/src/main/java/de/nec/nle/siafu/model/CoordinateTools.java</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>de</b></li><li class="navelem"><b>nec</b></li><li class="navelem"><b>nle</b></li><li class="navelem"><b>siafu</b></li><li class="navelem"><a class="el" href="namespacede_1_1nec_1_1nle_1_1siafu_1_1model.html">model</a></li><li class="navelem"><a class="el" href="classde_1_1nec_1_1nle_1_1siafu_1_1model_1_1_coordinate_tools.html">CoordinateTools</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
